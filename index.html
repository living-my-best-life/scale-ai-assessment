<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Assess your organization's AI maturity using the SCALE framework. Get personalized recommendations for your AI transformation journey.">
    <meta name="theme-color" content="#0a0619">
    <title>SCALE AI Maturity Assessment | AI Architecture Lab</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        :root {
            /* Brand Colors */
            --brand-dark: #0a0619;
            --brand-white: #ffffff;
            --brand-cyan: #35a0c4;
            --brand-blue: #216fdf;
            --brand-green: #57ec99;
            --brand-orange: #fc8852;
            --brand-pink: #fc4e99;
            --brand-teal: #39b6ba;
            --brand-yellow: #fcae26;

            /* Semantic mappings */
            --primary: #216fdf;
            --primary-dark: #1a5abd;
            --primary-light: #4a8be8;
            --secondary: #0a0619;
            --accent: #35a0c4;
            --success: #57ec99;
            --warning: #fcae26;
            --danger: #fc4e99;

            /* Grays derived from brand dark */
            --gray-50: #f8f8fa;
            --gray-100: #ededf2;
            --gray-200: #d8d8e0;
            --gray-300: #b8b8c4;
            --gray-400: #8888a0;
            --gray-500: #5c5c78;
            --gray-600: #3d3d54;
            --gray-700: #252536;
            --gray-800: #151524;
            --gray-900: #0a0619;

            /* Gradients using brand colors */
            --gradient-1: linear-gradient(135deg, #216fdf 0%, #fc4e99 100%);
            --gradient-2: linear-gradient(135deg, #216fdf 0%, #35a0c4 100%);
            --gradient-3: linear-gradient(135deg, #0a0619 0%, #151524 100%);
            --gradient-accent: linear-gradient(135deg, #35a0c4 0%, #39b6ba 100%);

            --shadow-sm: 0 1px 2px 0 rgb(10 6 25 / 0.05);
            --shadow: 0 1px 3px 0 rgb(10 6 25 / 0.1), 0 1px 2px -1px rgb(10 6 25 / 0.1);
            --shadow-md: 0 4px 6px -1px rgb(10 6 25 / 0.1), 0 2px 4px -2px rgb(10 6 25 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(10 6 25 / 0.1), 0 4px 6px -4px rgb(10 6 25 / 0.1);
            --shadow-xl: 0 20px 25px -5px rgb(10 6 25 / 0.1), 0 8px 10px -6px rgb(10 6 25 / 0.1);

            /* Animation timing */
            --transition-fast: 150ms ease;
            --transition-normal: 300ms ease;
            --transition-slow: 500ms ease;
        }

        /* Reduced motion preference */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Focus styles for accessibility */
        *:focus-visible {
            outline: 3px solid var(--brand-cyan);
            outline-offset: 2px;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--gray-50);
            color: var(--gray-800);
            line-height: 1.6;
            min-height: 100vh;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Skip link for accessibility */
        .skip-link {
            position: absolute;
            top: -100px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--brand-blue);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            z-index: 1000;
            transition: top var(--transition-fast);
        }

        .skip-link:focus {
            top: 10px;
        }

        /* Header */
        .header {
            background: var(--gradient-3);
            color: white;
            padding: 1rem 0;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 100;
            box-shadow: var(--shadow-lg);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 800;
            letter-spacing: -0.02em;
        }

        .logo span {
            background: var(--gradient-2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header-subtitle {
            font-size: 0.875rem;
            color: var(--gray-400);
            font-weight: 400;
        }

        /* Progress Bar */
        .progress-container {
            position: fixed;
            top: 77px;
            left: 0;
            right: 0;
            background: var(--gray-200);
            height: 4px;
            z-index: 99;
        }

        .progress-bar {
            height: 100%;
            background: var(--gradient-2);
            transition: width 0.3s ease;
            width: 0%;
        }

        /* Status Bar */
        .status-bar {
            position: fixed;
            top: 81px;
            left: 0;
            right: 0;
            background: var(--brand-white);
            border-bottom: 1px solid var(--gray-200);
            z-index: 98;
            padding: 0.75rem 0;
            display: none;
            box-shadow: var(--shadow-sm);
        }

        .status-bar.visible {
            display: block;
        }

        .status-bar-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .status-dimensions {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .status-dimension {
            width: 36px;
            height: 36px;
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.875rem;
            color: var(--gray-400);
            background: var(--gray-100);
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .status-dimension.completed {
            background: var(--brand-green);
            color: white;
        }

        .status-dimension.active {
            border-color: var(--brand-blue);
            color: var(--brand-blue);
            background: rgba(33, 111, 223, 0.1);
        }

        .status-dimension.s.active { border-color: #216fdf; color: #216fdf; background: rgba(33, 111, 223, 0.1); }
        .status-dimension.c.active { border-color: #fc4e99; color: #fc4e99; background: rgba(252, 78, 153, 0.1); }
        .status-dimension.a.active { border-color: #35a0c4; color: #35a0c4; background: rgba(53, 160, 196, 0.1); }
        .status-dimension.l.active { border-color: #57ec99; color: #3dc97a; background: rgba(87, 236, 153, 0.1); }
        .status-dimension.e.active { border-color: #fc8852; color: #fc8852; background: rgba(252, 136, 82, 0.1); }

        .status-dimension.s.completed { background: linear-gradient(135deg, #216fdf, #1a5abd); }
        .status-dimension.c.completed { background: linear-gradient(135deg, #fc4e99, #d43d7d); }
        .status-dimension.a.completed { background: linear-gradient(135deg, #35a0c4, #39b6ba); }
        .status-dimension.l.completed { background: linear-gradient(135deg, #57ec99, #3dc97a); }
        .status-dimension.e.completed { background: linear-gradient(135deg, #fc8852, #fcae26); }

        .status-connector {
            width: 20px;
            height: 2px;
            background: var(--gray-200);
            transition: background 0.3s ease;
        }

        .status-connector.completed {
            background: var(--brand-green);
        }

        .status-info {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .status-text {
            font-size: 0.875rem;
            color: var(--gray-600);
        }

        .status-text strong {
            color: var(--gray-800);
        }

        .status-percentage {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--brand-blue);
        }

        /* Main Container */
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 90px 1.5rem 2rem;
        }

        .container.with-status-bar {
            padding-top: 150px;
        }

        /* Welcome Screen - Compact to fit above fold */
        .welcome-screen {
            text-align: center;
            padding: 2rem 2rem;
            background: white;
            border-radius: 1.5rem;
            box-shadow: var(--shadow-xl);
            margin-top: 1rem;
            min-height: calc(100vh - 140px);
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            padding-top: 2.5rem;
        }

        .welcome-logo {
            height: 280px;
            width: auto;
            margin-bottom: 1.5rem;
        }

        .welcome-screen h1 {
            font-size: 2rem;
            font-weight: 800;
            color: var(--gray-900);
            margin-bottom: 0.5rem;
            letter-spacing: -0.02em;
        }

        .welcome-screen h1 span {
            background: var(--gradient-2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .welcome-screen p {
            font-size: 1rem;
            color: var(--gray-600);
            max-width: 550px;
            margin: 0 auto 1rem;
        }

        .welcome-logo {
            height: 60px;
            width: auto;
            margin-bottom: 1.5rem;
            object-fit: contain;
            max-width: 280px;
        }

        .scale-preview {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin: 1.25rem 0;
            flex-wrap: wrap;
        }

        .scale-letter {
            width: 56px;
            height: 56px;
            border-radius: 0.75rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.25rem;
            color: white;
            transition: transform 0.3s ease;
        }

        .scale-letter:hover {
            transform: translateY(-3px);
        }

        .scale-letter span {
            font-size: 0.5rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-top: 2px;
        }

        .letter-s { background: linear-gradient(135deg, #216fdf, #1a5abd); }
        .letter-c { background: linear-gradient(135deg, #fc4e99, #d43d7d); }
        .letter-a { background: linear-gradient(135deg, #35a0c4, #39b6ba); }
        .letter-l { background: linear-gradient(135deg, #57ec99, #3dc97a); }
        .letter-e { background: linear-gradient(135deg, #fc8852, #fcae26); }

        .stat-grid {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin: 1.25rem 0;
            text-align: center;
        }

        .stat-item {
            padding: 0;
            background: transparent;
        }

        .stat-number {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--primary);
        }

        .stat-label {
            font-size: 0.75rem;
            color: var(--gray-600);
            margin-top: 0.125rem;
        }

        .btn-primary {
            background: var(--gradient-2);
            color: white;
            border: none;
            padding: 1rem 3rem;
            font-size: 1.125rem;
            font-weight: 600;
            border-radius: 0.75rem;
            cursor: pointer;
            transition: all var(--transition-normal);
            box-shadow: var(--shadow-lg);
            position: relative;
            overflow: hidden;
        }

        .btn-primary::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s ease, height 0.6s ease;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 20px 40px -10px rgba(33, 111, 223, 0.4);
        }

        .btn-primary:hover::after {
            width: 300px;
            height: 300px;
        }

        .btn-primary:active {
            transform: translateY(0);
        }

        .btn-primary:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: white;
            color: var(--primary);
            border: 2px solid var(--primary);
            padding: 0.875rem 2rem;
            font-size: 1rem;
            font-weight: 600;
            border-radius: 0.75rem;
            cursor: pointer;
            transition: all var(--transition-normal);
        }

        .btn-secondary:hover {
            background: var(--primary);
            color: white;
        }

        .btn-secondary:active {
            transform: scale(0.98);
        }

        /* Gamification: Streak Counter */
        .streak-indicator {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: linear-gradient(135deg, var(--brand-orange), var(--brand-yellow));
            color: white;
            border-radius: 2rem;
            font-size: 0.875rem;
            font-weight: 600;
            animation: pulse-glow 2s ease-in-out infinite;
        }

        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 0 0 rgba(252, 136, 82, 0.4); }
            50% { box-shadow: 0 0 20px 5px rgba(252, 136, 82, 0.2); }
        }

        /* Gamification: Progress Celebration */
        .celebration {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1000;
            pointer-events: none;
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            border-radius: 2px;
            animation: confetti-fall 1s ease-out forwards;
        }

        @keyframes confetti-fall {
            0% { opacity: 1; transform: translateY(0) rotate(0deg); }
            100% { opacity: 0; transform: translateY(100px) rotate(720deg); }
        }

        /* Video Container */
        .video-container {
            margin-top: 2rem;
            max-width: 720px;
            margin-left: auto;
            margin-right: auto;
        }

        .video-container.results-video {
            margin-top: 2.5rem;
            margin-bottom: 1rem;
        }

        .video-wrapper {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 aspect ratio */
            height: 0;
            overflow: hidden;
            border-radius: 1rem;
            box-shadow: var(--shadow-lg);
            background: var(--gray-200);
        }

        .video-wrapper iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 1rem;
        }

        .video-label {
            text-align: center;
            margin-top: 0.75rem;
            font-size: 0.875rem;
            color: var(--gray-500);
        }

        /* Email Capture Modal */
        .email-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(10, 6, 25, 0.8);
            backdrop-filter: blur(4px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .email-modal-overlay.visible {
            opacity: 1;
            visibility: visible;
        }

        .email-modal {
            background: white;
            border-radius: 1.5rem;
            padding: 2.5rem;
            max-width: 440px;
            width: 90%;
            text-align: center;
            box-shadow: var(--shadow-xl);
            transform: scale(0.9) translateY(20px);
            transition: transform 0.3s ease;
        }

        .email-modal-overlay.visible .email-modal {
            transform: scale(1) translateY(0);
        }

        .email-modal h2 {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--gray-900);
            margin-bottom: 0.5rem;
        }

        .email-modal p {
            color: var(--gray-600);
            margin-bottom: 1.5rem;
            font-size: 0.95rem;
        }

        .email-modal-progress {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .email-modal-progress .progress-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--gray-200);
        }

        .email-modal-progress .progress-dot.filled {
            background: var(--brand-green);
        }

        .email-modal-progress .progress-dot.current {
            background: var(--brand-blue);
            animation: pulse 1.5s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        .email-input-group {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .email-input {
            width: 100%;
            padding: 1rem 1.25rem;
            border: 2px solid var(--gray-200);
            border-radius: 0.75rem;
            font-size: 1rem;
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
        }

        .email-input:focus {
            outline: none;
            border-color: var(--brand-blue);
            box-shadow: 0 0 0 3px rgba(33, 111, 223, 0.1);
        }

        .email-input.error {
            border-color: var(--brand-pink);
        }

        .email-error-message {
            color: var(--brand-pink);
            font-size: 0.875rem;
            text-align: left;
            display: none;
        }

        .email-error-message.visible {
            display: block;
        }

        .email-submit-btn {
            width: 100%;
            background: var(--gradient-2);
            color: white;
            border: none;
            padding: 1rem;
            font-size: 1rem;
            font-weight: 600;
            border-radius: 0.75rem;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .email-submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px -5px rgba(33, 111, 223, 0.4);
        }

        .email-submit-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }

        .email-modal-footer {
            margin-top: 1rem;
            font-size: 0.75rem;
            color: var(--gray-400);
        }

        /* Achievement Badge */
        .achievement-toast {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: white;
            border-radius: 1rem;
            padding: 1rem 1.5rem;
            box-shadow: var(--shadow-xl);
            display: flex;
            align-items: center;
            gap: 1rem;
            z-index: 1000;
            animation: slide-in-right 0.5s ease, fade-out 0.5s ease 2.5s forwards;
            border-left: 4px solid var(--brand-green);
        }

        @keyframes slide-in-right {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes fade-out {
            to { opacity: 0; transform: translateX(100%); }
        }

        .achievement-icon {
            width: 40px;
            height: 40px;
            background: var(--brand-green);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
        }

        .achievement-text h4 {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--gray-800);
        }

        .achievement-text p {
            font-size: 0.75rem;
            color: var(--gray-500);
        }

        /* Assessment Screen */
        .assessment-screen {
            display: none;
        }

        .dimension-header {
            background: white;
            border-radius: 1.5rem;
            padding: 2rem;
            margin-bottom: 1.5rem;
            box-shadow: var(--shadow-md);
        }

        .dimension-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            border-radius: 2rem;
            font-size: 0.875rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .dimension-badge.strategic { background: rgba(33, 111, 223, 0.1); color: #216fdf; }
        .dimension-badge.chart { background: rgba(252, 78, 153, 0.1); color: #fc4e99; }
        .dimension-badge.align { background: rgba(53, 160, 196, 0.1); color: #35a0c4; }
        .dimension-badge.launch { background: rgba(87, 236, 153, 0.1); color: #3dc97a; }
        .dimension-badge.evolve { background: rgba(252, 136, 82, 0.1); color: #fc8852; }

        .dimension-title {
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--gray-900);
            margin-bottom: 0.5rem;
        }

        .dimension-description {
            color: var(--gray-600);
            font-size: 1rem;
        }

        .question-card {
            background: white;
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 1rem;
            box-shadow: var(--shadow);
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .question-card:hover {
            box-shadow: var(--shadow-md);
        }

        .question-card.answered {
            border-color: var(--success);
            background: rgba(16, 185, 129, 0.02);
        }

        .question-number {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--gray-400);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 0.5rem;
        }

        .question-text {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--gray-800);
            margin-bottom: 1.25rem;
        }

        .options-grid {
            display: grid;
            gap: 0.75rem;
        }

        .option-label {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            padding: 1rem;
            background: var(--gray-50);
            border: 2px solid var(--gray-200);
            border-radius: 0.75rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .option-label:hover {
            border-color: var(--primary-light);
            background: rgba(59, 130, 246, 0.05);
        }

        .option-label.selected {
            border-color: var(--primary);
            background: rgba(59, 130, 246, 0.1);
        }

        .option-radio {
            width: 20px;
            height: 20px;
            border: 2px solid var(--gray-300);
            border-radius: 50%;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 2px;
            transition: all 0.2s ease;
        }

        .option-label.selected .option-radio {
            border-color: var(--primary);
            background: var(--primary);
        }

        .option-label.selected .option-radio::after {
            content: '';
            width: 8px;
            height: 8px;
            background: white;
            border-radius: 50%;
        }

        .option-content {
            flex: 1;
        }

        .option-level {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--gray-500);
            margin-bottom: 0.25rem;
        }

        .option-text {
            font-size: 0.9375rem;
            color: var(--gray-700);
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 2rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--gray-200);
        }

        .btn-nav {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.875rem 1.5rem;
            border-radius: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn-back {
            background: var(--gray-100);
            color: var(--gray-700);
            border: none;
        }

        .btn-back:hover {
            background: var(--gray-200);
        }

        .btn-next {
            background: var(--primary);
            color: white;
            border: none;
        }

        .btn-next:hover {
            background: var(--primary-dark);
        }

        .btn-next:disabled {
            background: var(--gray-300);
            cursor: not-allowed;
        }

        /* Results Screen */
        .results-screen {
            display: none;
        }

        .results-header {
            text-align: center;
            background: var(--gradient-3);
            color: white;
            padding: 3rem 2rem;
            border-radius: 1.5rem;
            margin-bottom: 2rem;
        }

        .results-header h2 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .overall-score {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 2rem;
            margin-top: 2rem;
        }

        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: rgba(255,255,255,0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 4px solid rgba(255,255,255,0.3);
        }

        .score-value {
            font-size: 3rem;
            font-weight: 800;
        }

        .score-label {
            font-size: 0.875rem;
            opacity: 0.8;
        }

        .maturity-level {
            text-align: left;
        }

        .maturity-level h3 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .maturity-level p {
            opacity: 0.9;
            font-size: 1rem;
        }

        .results-grid {
            display: grid;
            gap: 1.5rem;
        }

        .result-card {
            background: white;
            border-radius: 1rem;
            padding: 1.5rem;
            box-shadow: var(--shadow-md);
        }

        .result-card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
        }

        .result-dimension {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .result-icon {
            width: 48px;
            height: 48px;
            border-radius: 0.75rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 700;
            color: white;
        }

        .result-info h4 {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--gray-900);
        }

        .result-info p {
            font-size: 0.875rem;
            color: var(--gray-500);
        }

        .result-score-badge {
            padding: 0.5rem 1rem;
            border-radius: 2rem;
            font-weight: 700;
            font-size: 1.125rem;
        }

        .score-level-1 { background: rgba(252, 78, 153, 0.15); color: #d43d7d; }
        .score-level-2 { background: rgba(252, 136, 82, 0.15); color: #e06a35; }
        .score-level-3 { background: rgba(252, 174, 38, 0.15); color: #c98a1a; }
        .score-level-4 { background: rgba(53, 160, 196, 0.15); color: #2a8099; }
        .score-level-5 { background: rgba(87, 236, 153, 0.15); color: #2da362; }

        .result-bar {
            height: 8px;
            background: var(--gray-200);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 1rem;
        }

        .result-bar-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 1s ease;
        }

        .recommendations {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--gray-100);
        }

        .recommendations h5 {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--gray-700);
            margin-bottom: 0.75rem;
        }

        .recommendation-item {
            display: flex;
            align-items: flex-start;
            gap: 0.5rem;
            font-size: 0.875rem;
            color: var(--gray-600);
            margin-bottom: 0.5rem;
        }

        .recommendation-item::before {
            content: '→';
            color: var(--primary);
            font-weight: 600;
        }

        .action-plan {
            background: white;
            border-radius: 1rem;
            padding: 2rem;
            margin-top: 2rem;
            box-shadow: var(--shadow-md);
        }

        .action-plan h3 {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .action-steps {
            display: grid;
            gap: 1rem;
        }

        .action-step {
            display: flex;
            gap: 1rem;
            padding: 1rem;
            background: var(--gray-50);
            border-radius: 0.75rem;
        }

        .step-number {
            width: 32px;
            height: 32px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            flex-shrink: 0;
        }

        .step-content h5 {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .step-content p {
            font-size: 0.875rem;
            color: var(--gray-600);
        }

        .cta-section {
            text-align: center;
            margin-top: 2rem;
            padding: 2rem;
            background: linear-gradient(135deg, rgba(37, 99, 235, 0.1), rgba(6, 182, 212, 0.1));
            border-radius: 1rem;
        }

        .cta-section h3 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .cta-section p {
            color: var(--gray-600);
            margin-bottom: 1.5rem;
        }

        .btn-group {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        /* Mobile First Responsive Design */

        /* Small phones */
        @media (max-width: 480px) {
            .header-content {
                padding: 0 1rem;
                flex-direction: column;
                gap: 0.5rem;
                text-align: center;
            }

            .header-logo {
                height: 35px !important;
            }

            .logo {
                font-size: 1.25rem;
            }

            .header-subtitle {
                font-size: 0.75rem;
            }

            .welcome-screen {
                padding: 1.5rem 1rem;
                min-height: calc(100vh - 120px);
            }

            .welcome-logo {
                height: 60px;
                margin-bottom: 0.75rem;
            }

            .welcome-screen h1 {
                font-size: 1.5rem;
            }

            .welcome-screen p {
                font-size: 0.9rem;
                margin-bottom: 0.75rem;
            }

            .scale-letter {
                width: 44px;
                height: 44px;
                font-size: 1rem;
                border-radius: 0.5rem;
            }

            .scale-letter span {
                font-size: 0.45rem;
            }

            .scale-preview {
                margin: 1rem 0;
                gap: 0.35rem;
            }

            .stat-grid {
                flex-direction: row;
                gap: 1rem;
                margin: 1rem 0;
            }

            .stat-number {
                font-size: 1.25rem;
            }

            .stat-label {
                font-size: 0.65rem;
            }

            .btn-primary {
                width: 100%;
                padding: 1rem 2rem;
            }

            .container {
                padding: 100px 1rem 2rem;
            }

            .container.with-status-bar {
                padding-top: 160px;
            }

            .status-bar-content {
                flex-direction: column;
                gap: 0.75rem;
                padding: 0 1rem;
            }

            .status-info {
                width: 100%;
                justify-content: space-between;
            }

            .status-dimension {
                width: 30px;
                height: 30px;
                font-size: 0.75rem;
            }

            .status-connector {
                width: 12px;
            }

            .question-card {
                padding: 1rem;
            }

            .question-text {
                font-size: 1rem;
            }

            .option-label {
                padding: 0.75rem;
            }

            .option-text {
                font-size: 0.875rem;
            }

            .navigation-buttons {
                flex-direction: column;
                gap: 0.75rem;
            }

            .btn-nav {
                width: 100%;
                justify-content: center;
            }

            .result-card {
                padding: 1rem;
            }

            .result-card-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.75rem;
            }

            .cta-section {
                padding: 1.5rem 1rem;
            }

            .btn-group {
                flex-direction: column;
            }

            .btn-group button {
                width: 100%;
            }

            .achievement-toast {
                left: 1rem;
                right: 1rem;
                bottom: 1rem;
            }
        }

        /* Tablets */
        @media (max-width: 768px) {
            .welcome-screen h1 {
                font-size: 1.75rem;
            }

            .stat-grid {
                grid-template-columns: repeat(3, 1fr);
            }

            .scale-preview {
                gap: 0.5rem;
            }

            .scale-letter {
                width: 55px;
                height: 55px;
                font-size: 1.25rem;
            }

            .overall-score {
                flex-direction: column;
                gap: 1rem;
            }

            .maturity-level {
                text-align: center;
            }

            .dimension-header {
                padding: 1.5rem;
            }

            .dimension-title {
                font-size: 1.5rem;
            }
        }

        /* Landscape phones */
        @media (max-width: 768px) and (orientation: landscape) {
            .welcome-screen {
                padding: 2rem;
            }

            .stat-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        /* Large screens */
        @media (min-width: 1200px) {
            .container {
                max-width: 1000px;
            }

            .results-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes scaleIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        @keyframes slideInLeft {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .animate-in {
            animation: fadeIn 0.5s ease forwards;
        }

        .animate-scale {
            animation: scaleIn 0.4s ease forwards;
        }

        .animate-slide {
            animation: slideInLeft 0.4s ease forwards;
        }

        /* Staggered animations for lists */
        .question-card:nth-child(1) { animation-delay: 0.05s; }
        .question-card:nth-child(2) { animation-delay: 0.1s; }
        .question-card:nth-child(3) { animation-delay: 0.15s; }
        .question-card:nth-child(4) { animation-delay: 0.2s; }
        .question-card:nth-child(5) { animation-delay: 0.25s; }

        .result-card:nth-child(1) { animation-delay: 0.1s; }
        .result-card:nth-child(2) { animation-delay: 0.2s; }
        .result-card:nth-child(3) { animation-delay: 0.3s; }
        .result-card:nth-child(4) { animation-delay: 0.4s; }
        .result-card:nth-child(5) { animation-delay: 0.5s; }

        /* Touch-friendly tap targets (WCAG 2.5.5) */
        @media (pointer: coarse) {
            .option-label {
                min-height: 48px;
            }

            .btn-nav, .btn-primary, .btn-secondary {
                min-height: 48px;
            }

            .status-dimension {
                min-width: 44px;
                min-height: 44px;
            }
        }

        /* High contrast mode support */
        @media (prefers-contrast: high) {
            .option-label {
                border-width: 3px;
            }

            .question-card.answered {
                border-width: 3px;
            }

            .btn-primary, .btn-secondary {
                border: 2px solid currentColor;
            }
        }

        /* Print styles */
        @media print {
            .header, .progress-container, .status-bar, .navigation-buttons, .btn-primary, .btn-secondary, .achievement-toast {
                display: none !important;
            }
            .container {
                padding-top: 0;
            }
            .results-screen {
                display: block !important;
            }
            .result-card {
                break-inside: avoid;
            }
        }
    </style>
</head>
<body>
    <!-- Skip link for keyboard accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <header class="header" role="banner">
        <div class="header-content">
            <div style="display: flex; align-items: center; gap: 1rem;">
                <img src="logo-dark.png" alt="AI Business Network" class="header-logo" style="height: 55px; width: auto;">
                <div>
                    <div class="logo"><span>SCALE</span> AI Assessment</div>
                    <div class="header-subtitle">AI Architecture Lab</div>
                </div>
            </div>
            <div id="progress-text" style="font-size: 0.875rem; color: var(--gray-400);" aria-live="polite"></div>
        </div>
    </header>

    <div class="progress-container">
        <div class="progress-bar" id="progress-bar"></div>
    </div>

    <div class="status-bar" id="status-bar">
        <div class="status-bar-content">
            <div class="status-dimensions">
                <div class="status-dimension s" id="status-s" title="Strategic Outcomes">S</div>
                <div class="status-connector" id="connector-1"></div>
                <div class="status-dimension c" id="status-c" title="Chart Friction">C</div>
                <div class="status-connector" id="connector-2"></div>
                <div class="status-dimension a" id="status-a" title="Align Capabilities">A</div>
                <div class="status-connector" id="connector-3"></div>
                <div class="status-dimension l" id="status-l" title="Launch with Control">L</div>
                <div class="status-connector" id="connector-4"></div>
                <div class="status-dimension e" id="status-e" title="Evolve & Expand">E</div>
            </div>
            <div class="status-info">
                <div class="status-text">
                    <span id="status-dimension-name">Strategic Outcomes</span> &bull;
                    <strong id="status-question-count">0/3</strong> questions
                </div>
                <div class="status-percentage" id="status-percentage">0%</div>
            </div>
        </div>
    </div>

    <main class="container" id="main-container" role="main">
        <div id="main-content"></div>
        <!-- Welcome Screen -->
        <div class="welcome-screen" id="welcome-screen" aria-labelledby="welcome-title">
            <img src="AI lab - logo (1).png" alt="AI Architecture Lab" class="welcome-logo">
            <h1 id="welcome-title">Assess Your <span>AI Maturity</span></h1>
            <p>Discover where you stand using the SCALE framework and get personalized recommendations.</p>

            <div class="scale-preview">
                <div class="scale-letter letter-s">S<span>Strategic</span></div>
                <div class="scale-letter letter-c">C<span>Chart</span></div>
                <div class="scale-letter letter-a">A<span>Align</span></div>
                <div class="scale-letter letter-l">L<span>Launch</span></div>
                <div class="scale-letter letter-e">E<span>Evolve</span></div>
            </div>

            <div class="stat-grid">
                <div class="stat-item">
                    <div class="stat-number">73%</div>
                    <div class="stat-label">of AI initiatives fail</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">4.3x</div>
                    <div class="stat-label">higher success with SCALE</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">~2 min</div>
                    <div class="stat-label">15 questions</div>
                </div>
            </div>

            <button class="btn-primary" onclick="startAssessment()">
                Start Your Assessment →
            </button>

            <p style="margin-top: 1.5rem; font-size: 0.875rem; color: var(--gray-500); max-width: 500px; margin-left: auto; margin-right: auto;">
                <strong style="color: var(--brand-blue);">Bring your results to the AI Architecture Lab</strong> to implement effectively and realize the true value of AI.
            </p>

            <!-- Home Page Video -->
            <div class="video-container" id="home-video-container">
                <div class="video-wrapper">
                    <iframe id="home-video-iframe" src="" allowfullscreen></iframe>
                </div>
                <p class="video-label">Learn more about the AI Architecture Lab</p>
            </div>
        </div>

        <!-- Assessment Screen -->
        <div class="assessment-screen" id="assessment-screen" role="region" aria-label="Assessment questions"></div>

        <!-- Results Screen -->
        <div class="results-screen" id="results-screen" role="region" aria-label="Assessment results"></div>
    </main>

    <!-- Achievement Toast Container -->
    <div id="toast-container" aria-live="polite" aria-atomic="true"></div>

    <!-- Email Capture Modal -->
    <div class="email-modal-overlay" id="email-modal">
        <div class="email-modal">
            <h2>You're Halfway There!</h2>
            <p>Enter your email to save your progress and receive your personalized results report.</p>

            <div class="email-modal-progress">
                <div class="progress-dot filled"></div>
                <div class="progress-dot filled"></div>
                <div class="progress-dot filled"></div>
                <div class="progress-dot filled"></div>
                <div class="progress-dot current"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
            </div>

            <div class="email-input-group">
                <input type="email" class="email-input" id="email-input" placeholder="Enter your email address" autocomplete="email">
                <span class="email-error-message" id="email-error">Please enter a valid email address</span>
                <button class="email-submit-btn" id="email-submit-btn" onclick="submitEmail()">
                    Continue Assessment
                </button>
            </div>

            <p class="email-modal-footer">
                We'll follow up with insights from the AI Architecture Lab.
            </p>
        </div>
    </div>

    <script>
        // Vidyard Video Configuration - Rotating videos for home and results pages
        const vidyardVideos = [
            'bTDmuH3zRR3ibMw3J8bMbB',
            'PsoScDvUkoDT9gAt7XgdYw',
            '66CE45dZf2i2BC353xMqdB',
            'FX4exU5fPoKEkzBVyMnNPe',
            'qRikkGJuKUZUU7LJjm3TsE'
        ];

        // Get random video (different for home vs results)
        function getRandomVideo(excludeIndex = -1) {
            let availableVideos = vidyardVideos.map((v, i) => i);
            if (excludeIndex >= 0) {
                availableVideos = availableVideos.filter(i => i !== excludeIndex);
            }
            const randomIndex = availableVideos[Math.floor(Math.random() * availableVideos.length)];
            return { id: vidyardVideos[randomIndex], index: randomIndex };
        }

        // Initialize home page video
        let homeVideoIndex = -1;
        function initHomeVideo() {
            const video = getRandomVideo();
            homeVideoIndex = video.index;
            const iframe = document.getElementById('home-video-iframe');
            if (iframe) {
                iframe.src = `https://play.vidyard.com/${video.id}.html?`;
            }
        }

        // Initialize videos on page load
        document.addEventListener('DOMContentLoaded', initHomeVideo);

        // Get a different video for results page (excludes home video)
        function getResultsVideo() {
            const video = getRandomVideo(homeVideoIndex);
            return video.id;
        }

        // Supabase Configuration
        // IMPORTANT: Use the anon/public key from Project Settings > API (starts with 'eyJ...')
        // The 'sb_publishable_' keys don't work with the REST API
        const SUPABASE_URL = 'https://wjaqkdsumsvcvwxdckpa.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndqYXFrZHN1bXN2Y3Z3eGRja3BhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk5NDYyMDQsImV4cCI6MjA4NTUyMjIwNH0.DK393nIQMH9JOYdYgUZZHZ0DOFIbRO3vUNRn1tFdc-I';

        // Email capture state
        let userEmail = null;
        let emailRecordId = null;
        let emailCaptured = false;

        // Supabase helper function
        async function supabaseRequest(endpoint, method = 'GET', body = null) {
            const options = {
                method,
                headers: {
                    'apikey': SUPABASE_KEY,
                    'Authorization': `Bearer ${SUPABASE_KEY}`,
                    'Content-Type': 'application/json',
                    'Prefer': 'return=representation'
                }
            };
            if (body) {
                options.body = JSON.stringify(body);
            }

            console.log('Supabase request:', method, endpoint, body);

            try {
                const response = await fetch(`${SUPABASE_URL}/rest/v1/${endpoint}`, options);

                if (!response.ok) {
                    const errorText = await response.text();
                    console.error('Supabase error response:', response.status, errorText);
                    throw new Error(`Supabase error: ${response.status} - ${errorText}`);
                }

                const data = await response.json();
                console.log('Supabase success:', data);
                return data;
            } catch (error) {
                console.error('Supabase request failed:', error);
                throw error;
            }
        }

        // Show email modal
        function showEmailModal() {
            document.getElementById('email-modal').classList.add('visible');
            document.getElementById('email-input').focus();
        }

        // Hide email modal
        function hideEmailModal() {
            document.getElementById('email-modal').classList.remove('visible');
        }

        // Validate email
        function isValidEmail(email) {
            return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
        }

        // Submit email
        async function submitEmail() {
            const emailInput = document.getElementById('email-input');
            const errorMessage = document.getElementById('email-error');
            const submitBtn = document.getElementById('email-submit-btn');
            const email = emailInput.value.trim();

            // Validate
            if (!isValidEmail(email)) {
                emailInput.classList.add('error');
                errorMessage.classList.add('visible');
                return;
            }

            // Clear errors
            emailInput.classList.remove('error');
            errorMessage.classList.remove('visible');

            // Disable button and show loading
            submitBtn.disabled = true;
            submitBtn.textContent = 'Saving...';

            try {
                // Calculate current score at capture
                const answeredCount = Object.keys(answers).length;
                const currentTotal = Object.values(answers).reduce((sum, val) => sum + val, 0);
                const scoreAtCapture = answeredCount > 0 ? (currentTotal / answeredCount).toFixed(2) : 0;

                // Save to Supabase
                const result = await supabaseRequest('assessment_emails', 'POST', {
                    email: email,
                    score_at_capture: parseFloat(scoreAtCapture),
                    completed_assessment: false
                });

                // Store for later update
                userEmail = email;
                if (result && result.length > 0) {
                    emailRecordId = result[0].id;
                }
                emailCaptured = true;

                // Hide modal and continue
                hideEmailModal();

            } catch (error) {
                console.error('Error saving email:', error);
                // Still allow them to continue even if save fails
                emailCaptured = true;
                hideEmailModal();
            }

            submitBtn.disabled = false;
            submitBtn.textContent = 'Continue Assessment';
        }

        // Update record when assessment is completed
        async function updateEmailRecordWithResults(finalScore, maturityLevel) {
            if (!emailRecordId) return;

            try {
                await supabaseRequest(`assessment_emails?id=eq.${emailRecordId}`, 'PATCH', {
                    completed_assessment: true,
                    final_score: finalScore,
                    maturity_level: maturityLevel
                });
            } catch (error) {
                console.error('Error updating email record:', error);
            }
        }

        // Allow Enter key to submit email
        document.addEventListener('DOMContentLoaded', function() {
            const emailInput = document.getElementById('email-input');
            if (emailInput) {
                emailInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        submitEmail();
                    }
                });
            }
        });

        // Maturity level labels
        const maturityLabels = {
            1: { name: 'Ad Hoc', color: '#fc4e99' },
            2: { name: 'Exploring', color: '#fc8852' },
            3: { name: 'Establishing', color: '#fcae26' },
            4: { name: 'Executing', color: '#35a0c4' },
            5: { name: 'Scaling', color: '#57ec99' }
        };

        // Score band definitions
        const scoreBands = {
            atRisk: { min: 1.0, max: 1.9, name: 'At Risk', color: '#fc4e99', description: 'Critical gaps that threaten AI success' },
            emerging: { min: 2.0, max: 2.9, name: 'Emerging', color: '#fc8852', description: 'Foundation forming, but significant gaps remain' },
            developing: { min: 3.0, max: 3.9, name: 'Developing', color: '#fcae26', description: 'On the right track, but not yet competitive' },
            advanced: { min: 4.0, max: 4.5, name: 'Advanced', color: '#35a0c4', description: 'Strong position, ready to accelerate' },
            leading: { min: 4.6, max: 5.0, name: 'Leading', color: '#57ec99', description: 'Top-tier maturity, focus on optimization' }
        };

        // Risk of inaction messaging
        const riskOfInaction = {
            atRisk: {
                title: 'Critical: Act Now',
                risks: [
                    'AI projects fail at 3x the industry average rate',
                    'Best talent leaves for AI-forward competitors',
                    'Technical debt compounds as ad-hoc solutions proliferate',
                    'Within 12-18 months, competitors using AI will have 20-40% efficiency advantages'
                ]
            },
            emerging: {
                title: 'Warning: Stall Risk',
                risks: [
                    'Pilots don\'t translate to production value',
                    '"AI fatigue" sets in as initiatives stall without clear wins',
                    'Budget gets reallocated away from AI after failed experiments',
                    'Leadership loses confidence, creating a 2-3 year setback'
                ]
            },
            developing: {
                title: 'Caution: Scaling Gaps',
                risks: [
                    'Good work stays siloed and can\'t scale across the organization',
                    'Governance gaps create compliance and security risks',
                    'First-mover advantage window is closing',
                    'Organization becomes a "fast follower" instead of a leader'
                ]
            },
            advanced: {
                title: 'Maintain Momentum',
                risks: [
                    'Without continuous evolution, today\'s advantage becomes tomorrow\'s baseline',
                    'Competitors catch up within 18-24 months',
                    'Technical solutions age without refresh cycles',
                    'Innovation culture can plateau without new challenges'
                ]
            },
            leading: {
                title: 'Stay Ahead',
                risks: [
                    'Market leadership requires continuous reinvention',
                    'Emerging technologies may disrupt current advantages',
                    'Talent retention requires cutting-edge challenges',
                    'Complacency is the biggest risk at the top'
                ]
            }
        };

        // Assessment Data - Reduced to 3 questions per dimension
        const assessmentData = {
            dimensions: [
                {
                    id: 'strategic',
                    letter: 'S',
                    name: 'Strategic Outcomes',
                    tagline: 'Business goals before technology',
                    color: '#216fdf',
                    gradient: 'linear-gradient(135deg, #216fdf, #1a5abd)',
                    questions: [
                        {
                            id: 's1',
                            text: 'How clearly defined are your AI-related business objectives?',
                            options: [
                                { level: 1, text: 'No specific AI objectives defined' },
                                { level: 2, text: 'Vague goals like "use AI to improve efficiency"' },
                                { level: 3, text: 'General objectives tied to business areas' },
                                { level: 4, text: 'Specific, measurable objectives with targets' },
                                { level: 5, text: 'Quantified objectives with baselines, targets, and timelines' }
                            ]
                        },
                        {
                            id: 's2',
                            text: 'How do you measure success for AI initiatives?',
                            options: [
                                { level: 1, text: 'No defined metrics for AI success' },
                                { level: 2, text: 'Track adoption/usage but not outcomes' },
                                { level: 3, text: 'Some business metrics but inconsistent tracking' },
                                { level: 4, text: 'Track both process metrics and business outcomes' },
                                { level: 5, text: 'Comprehensive measurement with baselines and attribution' }
                            ]
                        },
                        {
                            id: 's3',
                            text: 'How connected are your AI initiatives to revenue and growth goals?',
                            options: [
                                { level: 1, text: 'AI is treated as a cost-center experiment' },
                                { level: 2, text: 'Loose connections to business goals' },
                                { level: 3, text: 'Tied to departmental objectives' },
                                { level: 4, text: 'Directly support strategic revenue goals' },
                                { level: 5, text: 'Clear ROI projections with executive sponsorship' }
                            ]
                        }
                    ]
                },
                {
                    id: 'chart',
                    letter: 'C',
                    name: 'Chart Friction & Foundations',
                    tagline: 'Map bottlenecks before automation',
                    color: '#fc4e99',
                    gradient: 'linear-gradient(135deg, #fc4e99, #d43d7d)',
                    questions: [
                        {
                            id: 'c1',
                            text: 'How well have you mapped your current workflows and processes?',
                            options: [
                                { level: 1, text: 'No documented workflow maps' },
                                { level: 2, text: 'Some documented, most are tribal knowledge' },
                                { level: 3, text: 'Key workflows documented but not updated' },
                                { level: 4, text: 'Comprehensive maps with handoff points' },
                                { level: 5, text: 'Dynamic maps identifying people, systems, and friction' }
                            ]
                        },
                        {
                            id: 'c2',
                            text: 'How well do you understand where friction exists in your GTM processes?',
                            options: [
                                { level: 1, text: 'Haven\'t analyzed friction points' },
                                { level: 2, text: 'Know anecdotally where problems occur' },
                                { level: 3, text: 'Identified bottlenecks but lack quantification' },
                                { level: 4, text: 'Quantified friction costs (time, revenue impact)' },
                                { level: 5, text: 'Continuously measure friction with business impact scores' }
                            ]
                        },
                        {
                            id: 'c3',
                            text: 'What is the state of your data infrastructure for AI?',
                            options: [
                                { level: 1, text: 'Data siloed with no unified view' },
                                { level: 2, text: 'Some integration but quality is inconsistent' },
                                { level: 3, text: 'Data warehouse but limited real-time access' },
                                { level: 4, text: 'Good quality with integration across key systems' },
                                { level: 5, text: 'Modern data stack with unified catalog and governance' }
                            ]
                        }
                    ]
                },
                {
                    id: 'align',
                    letter: 'A',
                    name: 'Align Capabilities & Readiness',
                    tagline: 'Match AI capabilities to problems',
                    color: '#35a0c4',
                    gradient: 'linear-gradient(135deg, #35a0c4, #39b6ba)',
                    questions: [
                        {
                            id: 'a1',
                            text: 'How well does your team understand different AI capabilities?',
                            options: [
                                { level: 1, text: 'Limited understanding - AI seen as one thing' },
                                { level: 2, text: 'Some awareness of generative AI vs. analytics' },
                                { level: 3, text: 'Understand categories but not how to apply them' },
                                { level: 4, text: 'Can match AI capabilities to business problems' },
                                { level: 5, text: 'Expert capability mapping with vendor landscape knowledge' }
                            ]
                        },
                        {
                            id: 'a2',
                            text: 'How do you approach build vs. buy decisions for AI?',
                            options: [
                                { level: 1, text: 'No framework - decisions are ad-hoc' },
                                { level: 2, text: 'Default to buying or building without analysis' },
                                { level: 3, text: 'Consider basic factors but lack rigor' },
                                { level: 4, text: 'Evaluate strategic value, resources, and TCO' },
                                { level: 5, text: 'Weighted scoring system for build/buy/hybrid' }
                            ]
                        },
                        {
                            id: 'a3',
                            text: 'How ready is your organization culturally for AI adoption?',
                            options: [
                                { level: 1, text: 'Significant resistance or fear about AI' },
                                { level: 2, text: 'Mixed feelings - some enthusiastic, many skeptical' },
                                { level: 3, text: 'Generally open but lacking skills and confidence' },
                                { level: 4, text: 'Strong interest with active experimentation' },
                                { level: 5, text: 'AI-first culture with executive sponsorship' }
                            ]
                        }
                    ]
                },
                {
                    id: 'launch',
                    letter: 'L',
                    name: 'Launch with Control',
                    tagline: 'Pilot with metrics and guardrails',
                    color: '#57ec99',
                    gradient: 'linear-gradient(135deg, #57ec99, #3dc97a)',
                    questions: [
                        {
                            id: 'l1',
                            text: 'How do you approach AI pilots and initial implementations?',
                            options: [
                                { level: 1, text: 'Deploy broadly without piloting' },
                                { level: 2, text: 'Informal testing by interested individuals' },
                                { level: 3, text: 'Pilot but without structured success criteria' },
                                { level: 4, text: 'Structured pilots with defined scope and metrics' },
                                { level: 5, text: 'Hypothesis-driven pilots with tiger teams' }
                            ]
                        },
                        {
                            id: 'l2',
                            text: 'How well do you establish baselines before AI implementation?',
                            options: [
                                { level: 1, text: 'Don\'t measure baseline performance' },
                                { level: 2, text: 'General ideas but no specific measurements' },
                                { level: 3, text: 'Capture some metrics inconsistently' },
                                { level: 4, text: 'Systematically measure key metrics before' },
                                { level: 5, text: 'Comprehensive baselines with control groups' }
                            ]
                        },
                        {
                            id: 'l3',
                            text: 'How do you manage risks during AI implementation?',
                            options: [
                                { level: 1, text: 'Don\'t formally assess or manage AI risks' },
                                { level: 2, text: 'React to problems as they arise' },
                                { level: 3, text: 'Basic risk awareness but no formal plans' },
                                { level: 4, text: 'Proactive identification with mitigation strategies' },
                                { level: 5, text: 'Comprehensive framework with guardrails and monitoring' }
                            ]
                        }
                    ]
                },
                {
                    id: 'evolve',
                    letter: 'E',
                    name: 'Evolve & Expand',
                    tagline: 'Scale with governance and measurement',
                    color: '#fc8852',
                    gradient: 'linear-gradient(135deg, #fc8852, #fcae26)',
                    questions: [
                        {
                            id: 'e1',
                            text: 'How do you scale successful AI initiatives?',
                            options: [
                                { level: 1, text: 'Haven\'t scaled any AI initiatives yet' },
                                { level: 2, text: 'Scaling happens organically without a plan' },
                                { level: 3, text: 'Some structured expansion but inconsistent' },
                                { level: 4, text: 'Defined scaling playbook from pilot to department' },
                                { level: 5, text: 'Enterprise blueprint with phased rollout criteria' }
                            ]
                        },
                        {
                            id: 'e2',
                            text: 'What AI governance structures do you have in place?',
                            options: [
                                { level: 1, text: 'No formal AI governance' },
                                { level: 2, text: 'Basic policies drafted but not enforced' },
                                { level: 3, text: 'Governance in some areas but not comprehensive' },
                                { level: 4, text: 'Established governance with clear ownership' },
                                { level: 5, text: 'AI Center of Excellence with cross-functional standards' }
                            ]
                        },
                        {
                            id: 'e3',
                            text: 'How do you continuously improve your AI systems?',
                            options: [
                                { level: 1, text: 'No systematic improvement process' },
                                { level: 2, text: 'Fix problems when they become critical' },
                                { level: 3, text: 'Periodic reviews with some improvements' },
                                { level: 4, text: 'Regular optimization based on performance data' },
                                { level: 5, text: 'Continuous improvement with automated monitoring' }
                            ]
                        }
                    ]
                }
            ]
        };

        // State
        let currentDimension = 0;
        let answers = {};

        // Initialize
        function init() {
            updateProgress();
            updateStatusBar();
        }

        function startAssessment() {
            document.getElementById('welcome-screen').style.display = 'none';
            document.getElementById('assessment-screen').style.display = 'block';
            document.getElementById('status-bar').classList.add('visible');
            document.getElementById('main-container').classList.add('with-status-bar');
            renderDimension(0);
            updateProgress();
            updateStatusBar();
        }

        function renderDimension(index) {
            currentDimension = index;
            const dimension = assessmentData.dimensions[index];
            const screen = document.getElementById('assessment-screen');

            let html = `
                <div class="dimension-header animate-in">
                    <div class="dimension-badge ${dimension.id}">
                        <span style="font-size: 1.25rem; font-weight: 700;">${dimension.letter}</span>
                        Phase ${index + 1} of 5
                    </div>
                    <h2 class="dimension-title">${dimension.name}</h2>
                    <p class="dimension-description">${dimension.tagline}</p>
                </div>
            `;

            dimension.questions.forEach((question, qIndex) => {
                const answered = answers[question.id] !== undefined;
                html += `
                    <div class="question-card ${answered ? 'answered' : ''}" id="question-${question.id}">
                        <div class="question-number">Question ${qIndex + 1} of ${dimension.questions.length}</div>
                        <div class="question-text">${question.text}</div>
                        <div class="options-grid">
                            ${question.options.map(option => `
                                <label class="option-label ${answers[question.id] === option.level ? 'selected' : ''}"
                                       onclick="selectOption('${question.id}', ${option.level}, this)">
                                    <div class="option-radio"></div>
                                    <div class="option-content">
                                        <div class="option-level" style="color: ${maturityLabels[option.level].color};">${maturityLabels[option.level].name}</div>
                                        <div class="option-text">${option.text}</div>
                                    </div>
                                </label>
                            `).join('')}
                        </div>
                    </div>
                `;
            });

            html += `
                <div class="navigation-buttons">
                    <button class="btn-nav btn-back" onclick="previousDimension()">
                        ← ${index === 0 ? 'Back' : 'Previous'}
                    </button>
                    <button class="btn-nav btn-next" onclick="nextDimension()" id="next-btn">
                        ${index === 4 ? 'View Results' : 'Next'} →
                    </button>
                </div>
            `;

            screen.innerHTML = html;
            updateProgress();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Gamification state
        let answerStreak = 0;
        let achievements = [];
        const achievementDefinitions = {
            firstAnswer: { title: 'First Step', description: 'Answered your first question!', icon: '🎯' },
            streak5: { title: 'On Fire!', description: '5 questions in a row!', icon: '🔥' },
            dimensionComplete: { title: 'Dimension Master', description: 'Completed a SCALE dimension!', icon: '⭐' },
            halfwayThere: { title: 'Halfway There', description: '50% complete!', icon: '🚀' },
            almostDone: { title: 'Final Push', description: 'Just a few more to go!', icon: '💪' },
            assessmentComplete: { title: 'SCALE Champion', description: 'Assessment complete!', icon: '🏆' }
        };

        function showAchievementToast(achievementKey) {
            if (achievements.includes(achievementKey)) return;
            achievements.push(achievementKey);

            const achievement = achievementDefinitions[achievementKey];
            if (!achievement) return;

            // Remove any existing toast
            const existingToast = document.querySelector('.achievement-toast');
            if (existingToast) existingToast.remove();

            const toast = document.createElement('div');
            toast.className = 'achievement-toast';
            toast.innerHTML = `
                <div class="achievement-icon">${achievement.icon}</div>
                <div class="achievement-content">
                    <div style="font-weight: 700; color: var(--brand-dark);">${achievement.title}</div>
                    <div style="font-size: 0.875rem; color: var(--gray-600);">${achievement.description}</div>
                </div>
            `;
            document.body.appendChild(toast);

            // Remove after animation
            setTimeout(() => toast.remove(), 3000);
        }

        function createConfetti() {
            const colors = ['#216fdf', '#fc4e99', '#35a0c4', '#57ec99', '#fc8852', '#fcae26'];
            const celebration = document.createElement('div');
            celebration.className = 'celebration';

            for (let i = 0; i < 30; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.left = `${Math.random() * 200 - 100}px`;
                confetti.style.top = `${Math.random() * 50 - 25}px`;
                confetti.style.animationDelay = `${Math.random() * 0.5}s`;
                confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
                celebration.appendChild(confetti);
            }

            document.body.appendChild(celebration);
            setTimeout(() => celebration.remove(), 1500);
        }

        function checkAchievements() {
            const answeredCount = Object.keys(answers).length;

            // First answer
            if (answeredCount === 1) {
                showAchievementToast('firstAnswer');
            }

            // Streak achievements
            if (answerStreak === 5) {
                showAchievementToast('streak5');
            }

            // Progress milestones
            if (answeredCount === 8 && !achievements.includes('halfwayThere')) {
                showAchievementToast('halfwayThere');
                createConfetti();
                // Show email capture modal after confetti (with delay for better UX)
                if (!emailCaptured) {
                    setTimeout(() => {
                        showEmailModal();
                    }, 1500);
                }
            }

            if (answeredCount === 13 && !achievements.includes('almostDone')) {
                showAchievementToast('almostDone');
            }

            // Check dimension completion
            const dimension = assessmentData.dimensions[currentDimension];
            const dimensionAnswered = dimension.questions.filter(q => answers[q.id] !== undefined).length;
            if (dimensionAnswered === 5 && !achievements.includes(`dimension_${dimension.id}`)) {
                achievements.push(`dimension_${dimension.id}`);
                showAchievementToast('dimensionComplete');
                createConfetti();
            }
        }

        function selectOption(questionId, level, element) {
            const wasAlreadyAnswered = answers[questionId] !== undefined;
            answers[questionId] = level;

            // Track streak
            if (!wasAlreadyAnswered) {
                answerStreak++;
            }

            // Update UI
            const card = element.closest('.question-card');
            card.querySelectorAll('.option-label').forEach(label => {
                label.classList.remove('selected');
            });
            element.classList.add('selected');
            card.classList.add('answered');

            updateProgress();

            // Check for achievements after new answers
            if (!wasAlreadyAnswered) {
                checkAchievements();
            }
        }

        function previousDimension() {
            if (currentDimension > 0) {
                renderDimension(currentDimension - 1);
            } else {
                // Go back to welcome screen from first dimension
                goToWelcome();
            }
        }

        function goToWelcome() {
            document.getElementById('assessment-screen').style.display = 'none';
            document.getElementById('welcome-screen').style.display = 'block';
            document.getElementById('status-bar').classList.remove('visible');
            document.getElementById('main-container').classList.remove('with-status-bar');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function nextDimension() {
            // Check if all questions in current dimension are answered
            const dimension = assessmentData.dimensions[currentDimension];
            const unanswered = dimension.questions.filter(q => answers[q.id] === undefined);

            if (unanswered.length > 0) {
                // Scroll to first unanswered question
                const firstUnanswered = document.getElementById(`question-${unanswered[0].id}`);
                firstUnanswered.style.borderColor = '#ef4444';
                firstUnanswered.scrollIntoView({ behavior: 'smooth', block: 'center' });
                setTimeout(() => {
                    firstUnanswered.style.borderColor = '';
                }, 2000);
                return;
            }

            if (currentDimension < 4) {
                renderDimension(currentDimension + 1);
            } else {
                showResults();
            }
        }

        function updateProgress() {
            const totalQuestions = 15;
            const answeredCount = Object.keys(answers).length;
            const progress = (answeredCount / totalQuestions) * 100;

            document.getElementById('progress-bar').style.width = `${progress}%`;
            document.getElementById('progress-text').textContent = `${answeredCount}/${totalQuestions} questions`;

            updateStatusBar();
        }

        function updateStatusBar() {
            const dimensionLetters = ['s', 'c', 'a', 'l', 'e'];
            const dimensionNames = ['Strategic Outcomes', 'Chart Friction', 'Align Capabilities', 'Launch with Control', 'Evolve & Expand'];

            // Update dimension indicators
            dimensionLetters.forEach((letter, index) => {
                const el = document.getElementById(`status-${letter}`);
                const dimension = assessmentData.dimensions[index];
                const answeredInDimension = dimension.questions.filter(q => answers[q.id] !== undefined).length;

                el.classList.remove('active', 'completed');

                if (index < currentDimension) {
                    el.classList.add('completed');
                } else if (index === currentDimension) {
                    el.classList.add('active');
                }

                // Update connectors
                if (index < 4) {
                    const connector = document.getElementById(`connector-${index + 1}`);
                    if (index < currentDimension) {
                        connector.classList.add('completed');
                    } else {
                        connector.classList.remove('completed');
                    }
                }
            });

            // Update status text
            const currentDim = assessmentData.dimensions[currentDimension];
            if (currentDim) {
                const answeredInCurrent = currentDim.questions.filter(q => answers[q.id] !== undefined).length;
                document.getElementById('status-dimension-name').textContent = dimensionNames[currentDimension];
                document.getElementById('status-question-count').textContent = `${answeredInCurrent}/3`;
            }

            // Update percentage
            const totalAnswered = Object.keys(answers).length;
            const percentage = Math.round((totalAnswered / 15) * 100);
            document.getElementById('status-percentage').textContent = `${percentage}%`;
        }

        function calculateScores() {
            const scores = {};
            let totalScore = 0;
            let totalQuestions = 0;

            assessmentData.dimensions.forEach(dimension => {
                let dimensionTotal = 0;
                dimension.questions.forEach(question => {
                    if (answers[question.id]) {
                        dimensionTotal += answers[question.id];
                        totalScore += answers[question.id];
                        totalQuestions++;
                    }
                });
                scores[dimension.id] = {
                    total: dimensionTotal,
                    average: dimensionTotal / dimension.questions.length,
                    percentage: (dimensionTotal / (dimension.questions.length * 5)) * 100
                };
            });

            scores.overall = {
                total: totalScore,
                average: totalScore / totalQuestions,
                percentage: (totalScore / (totalQuestions * 5)) * 100
            };

            return scores;
        }

        function getMaturityLevel(average) {
            if (average < 1.5) return { level: 1, name: 'Experimenting', description: 'Ad-hoc AI exploration without strategic direction' };
            if (average < 2.5) return { level: 2, name: 'Exploring', description: 'Beginning to identify AI opportunities with emerging structure' };
            if (average < 3.5) return { level: 3, name: 'Establishing', description: 'Structured approach emerging with defined processes' };
            if (average < 4.5) return { level: 4, name: 'Executing', description: 'Systematic implementation with measurable outcomes' };
            return { level: 5, name: 'Scaling', description: 'Enterprise-wide AI integration with continuous improvement' };
        }

        function getRecommendations(dimensionId, average) {
            const recommendations = {
                strategic: {
                    low: [
                        'Define 1-2 specific, measurable business objectives for AI',
                        'Use the 5 Whys technique to identify root causes of business challenges',
                        'Establish baseline metrics before any AI implementation'
                    ],
                    medium: [
                        'Create a Strategic Outcome Charter with clear targets and timelines',
                        'Categorize gaps into Skills, Systems, Strategy, and Product',
                        'Ensure executive sponsorship for all AI initiatives'
                    ],
                    high: [
                        'Expand strategic AI planning across all departments',
                        'Build predictive models for AI ROI forecasting',
                        'Create an AI strategy roadmap aligned with 3-year business goals'
                    ]
                },
                chart: {
                    low: [
                        'Document your top 3 GTM workflows with people and systems involved',
                        'Identify your biggest time-wasting activities',
                        'Audit your data quality in core systems (CRM, marketing automation)'
                    ],
                    medium: [
                        'Create friction maps quantifying business impact of bottlenecks',
                        'Build an impact vs. feasibility matrix for AI opportunities',
                        'Assess API readiness across your technology stack'
                    ],
                    high: [
                        'Implement real-time friction monitoring dashboards',
                        'Build a modern data architecture with unified governance',
                        'Create automated data quality scoring systems'
                    ]
                },
                align: {
                    low: [
                        'Train your team on the 6 core AI capabilities (Classification, Generation, etc.)',
                        'Start with the GRACE prompting framework for better AI interactions',
                        'Create a simple vendor evaluation checklist'
                    ],
                    medium: [
                        'Map your friction points to specific AI capabilities',
                        'Develop a build vs. buy scoring framework',
                        'Establish AI skill tracks for different roles'
                    ],
                    high: [
                        'Create an AI capability center of excellence',
                        'Build prompt libraries and best practice repositories',
                        'Develop AI vendor partnership strategy'
                    ]
                },
                launch: {
                    low: [
                        'Start with a single, focused pilot with clear success criteria',
                        'Assemble a tiger team with executive sponsor and top performers',
                        'Establish baseline metrics before any implementation'
                    ],
                    medium: [
                        'Implement hypothesis-driven testing for all pilots',
                        'Create structured feedback loops with weekly check-ins',
                        'Build a pilot communication strategy for internal momentum'
                    ],
                    high: [
                        'Develop automated pilot monitoring and alerting',
                        'Create a pilot-to-production playbook',
                        'Establish pilot success criteria benchmarks across use cases'
                    ]
                },
                evolve: {
                    low: [
                        'Document learnings from your first successful pilot',
                        'Draft basic AI usage policies and guidelines',
                        'Define who owns AI governance decisions'
                    ],
                    medium: [
                        'Create a scaling blueprint with phased rollout plans',
                        'Establish multi-level measurement (technical, operational, business)',
                        'Build AI upskilling programs for affected roles'
                    ],
                    high: [
                        'Establish an AI Center of Excellence',
                        'Implement continuous improvement loops with automated optimization',
                        'Create workforce transformation strategy with AI-native roles'
                    ]
                }
            };

            const level = average < 2.5 ? 'low' : average < 4 ? 'medium' : 'high';
            return recommendations[dimensionId][level];
        }

        function getScoreBand(average) {
            if (average < 2.0) return 'atRisk';
            if (average < 3.0) return 'emerging';
            if (average < 4.0) return 'developing';
            if (average <= 4.5) return 'advanced';
            return 'leading';
        }

        function generateExecutiveSummary(scores) {
            const sorted = Object.entries(scores)
                .filter(([key]) => key !== 'overall')
                .sort((a, b) => b[1].average - a[1].average);

            const strongest = sorted[0];
            const weakest = sorted[sorted.length - 1];
            const strongestDim = assessmentData.dimensions.find(d => d.id === strongest[0]);
            const weakestDim = assessmentData.dimensions.find(d => d.id === weakest[0]);
            const gap = strongest[1].average - weakest[1].average;
            const band = getScoreBand(scores.overall.average);

            let paragraph1 = '';
            let paragraph2 = '';

            // Paragraph 1: Pattern Analysis
            if (gap > 1.5) {
                paragraph1 = `Your assessment reveals a significant imbalance in AI maturity. You show relative strength in <strong>${strongestDim.name}</strong> (${strongest[1].average.toFixed(1)}) but a critical gap in <strong>${weakestDim.name}</strong> (${weakest[1].average.toFixed(1)}). This ${gap.toFixed(1)}-point spread suggests your AI initiatives may be built on an unstable foundation—`;

                if (weakest[0] === 'strategic') {
                    paragraph1 += `without clear strategic outcomes, even well-executed AI projects won't deliver business value.`;
                } else if (weakest[0] === 'chart') {
                    paragraph1 += `without mapped friction points, you're likely automating the wrong processes.`;
                } else if (weakest[0] === 'align') {
                    paragraph1 += `without aligned capabilities, you're vulnerable to choosing tools that don't fit your actual needs.`;
                } else if (weakest[0] === 'launch') {
                    paragraph1 += `without controlled launches, promising pilots will fail to prove ROI.`;
                } else {
                    paragraph1 += `without evolution plans, successful pilots will stall before delivering enterprise value.`;
                }
            } else {
                paragraph1 = `Your AI maturity is relatively balanced across dimensions, with scores ranging from ${weakest[1].average.toFixed(1)} to ${strongest[1].average.toFixed(1)}. Your strongest area is <strong>${strongestDim.name}</strong>, while <strong>${weakestDim.name}</strong> presents the greatest opportunity for improvement.`;
            }

            // Paragraph 2: Business Translation
            if (band === 'atRisk') {
                paragraph2 = `<strong>For your GTM motion, this is a critical concern.</strong> Organizations at this maturity level see AI projects fail at 3x the industry average. Without intervention, you risk wasting budget on initiatives that won't scale, losing talent to AI-forward competitors, and falling 12-18 months behind peers who are already operationalizing AI. The window to catch up is narrowing.`;
            } else if (band === 'emerging') {
                paragraph2 = `<strong>For your GTM motion, you're at a pivotal moment.</strong> Many organizations stall at this stage—pilots don't translate to production value, "AI fatigue" sets in, and budgets get reallocated after failed experiments. The difference between teams that break through and those that regress comes down to systematic execution in your weakest areas.`;
            } else if (band === 'developing') {
                paragraph2 = `<strong>For your GTM motion, you have solid foundations but scaling challenges ahead.</strong> The risk at this stage is that good work stays siloed, governance gaps create compliance risks, and the first-mover advantage window closes. Focus on enterprise-wide consistency to convert your departmental wins into competitive advantage.`;
            } else if (band === 'advanced') {
                paragraph2 = `<strong>For your GTM motion, you're positioned to lead.</strong> Your AI capabilities are strong, but competitors are working hard to close the gap. The focus now should be on continuous optimization, expanding AI into new value streams, and building the talent pipeline to sustain your advantage over the next 2-3 years.`;
            } else {
                paragraph2 = `<strong>For your GTM motion, you're in the top tier.</strong> Your challenge is maintaining leadership as the field advances rapidly. Focus on emerging technologies, AI-native talent development, and identifying the next wave of AI-driven competitive advantages before your peers.`;
            }

            return { paragraph1, paragraph2 };
        }

        function showResults() {
            document.getElementById('assessment-screen').style.display = 'none';
            document.getElementById('results-screen').style.display = 'block';
            document.getElementById('status-bar').classList.remove('visible');
            document.getElementById('main-container').classList.remove('with-status-bar');

            // Celebrate completion!
            showAchievementToast('assessmentComplete');
            setTimeout(() => createConfetti(), 500);
            setTimeout(() => createConfetti(), 1000);

            const scores = calculateScores();
            const overallMaturity = getMaturityLevel(scores.overall.average);
            const band = getScoreBand(scores.overall.average);
            const bandInfo = scoreBands[band];
            const risks = riskOfInaction[band];

            // Update email record with final results
            if (emailRecordId) {
                updateEmailRecordWithResults(
                    scores.overall.average.toFixed(2),
                    `${bandInfo.name} - ${overallMaturity.name}`
                );
            }
            const summary = generateExecutiveSummary(scores);

            let html = `
                <div class="results-header animate-in">
                    <img src="logo-dark.png" alt="AI Business Network" style="height: 80px; width: auto; margin-bottom: 1rem;">
                    <h2>Your SCALE AI Maturity Assessment Results</h2>
                    <p>Based on your responses across all 5 dimensions</p>
                    <div class="overall-score">
                        <div class="score-circle" style="border-color: ${bandInfo.color}40;">
                            <div class="score-value">${scores.overall.average.toFixed(1)}</div>
                            <div class="score-label">out of 5.0</div>
                        </div>
                        <div class="maturity-level">
                            <div style="display: inline-block; padding: 0.5rem 1rem; background: ${bandInfo.color}30; border-radius: 2rem; margin-bottom: 0.75rem;">
                                <span style="color: ${bandInfo.color}; font-weight: 700; font-size: 1.125rem;">${bandInfo.name}</span>
                            </div>
                            <h3 style="margin-bottom: 0.25rem;">${overallMaturity.name}</h3>
                            <p>${bandInfo.description}</p>
                        </div>
                    </div>
                </div>

                <!-- Executive Summary -->
                <div class="result-card animate-in" style="margin-top: 1.5rem; border-left: 4px solid ${bandInfo.color};">
                    <h3 style="margin-bottom: 1rem;">Your AI Maturity Analysis</h3>
                    <p style="color: var(--gray-700); line-height: 1.7; margin-bottom: 1rem;">
                        ${summary.paragraph1}
                    </p>
                    <p style="color: var(--gray-700); line-height: 1.7;">
                        ${summary.paragraph2}
                    </p>
                </div>

                <!-- Risk of Inaction -->
                <div class="result-card animate-in" style="margin-top: 1.5rem; background: linear-gradient(135deg, ${bandInfo.color}08, ${bandInfo.color}15); border: 1px solid ${bandInfo.color}30;">
                    <h3 style="margin-bottom: 1rem; color: ${bandInfo.color}; display: flex; align-items: center; gap: 0.5rem;">
${risks.title}
                    </h3>
                    <p style="font-weight: 600; color: var(--gray-700); margin-bottom: 0.75rem;">What happens if you don't act:</p>
                    <ul style="margin: 0; padding-left: 1.25rem; color: var(--gray-600);">
                        ${risks.risks.map(risk => `<li style="margin-bottom: 0.5rem;">${risk}</li>`).join('')}
                    </ul>
                </div>

                <div class="results-grid" style="margin-top: 1.5rem;">
            `;

            assessmentData.dimensions.forEach(dimension => {
                const score = scores[dimension.id];
                const maturity = getMaturityLevel(score.average);
                const dimBand = getScoreBand(score.average);
                const dimBandInfo = scoreBands[dimBand];
                const recommendations = getRecommendations(dimension.id, score.average);

                html += `
                    <div class="result-card animate-in">
                        <div class="result-card-header">
                            <div class="result-dimension">
                                <div class="result-icon" style="background: ${dimension.gradient};">
                                    ${dimension.letter}
                                </div>
                                <div class="result-info">
                                    <h4>${dimension.name}</h4>
                                    <p>${dimension.tagline}</p>
                                </div>
                            </div>
                            <div class="result-score-badge" style="background: ${dimBandInfo.color}20; color: ${dimBandInfo.color};">
                                ${score.average.toFixed(1)}
                            </div>
                        </div>
                        <div class="result-bar">
                            <div class="result-bar-fill" style="width: ${score.percentage}%; background: ${dimension.gradient};"></div>
                        </div>
                        <div style="font-size: 0.875rem; color: var(--gray-600); margin-bottom: 1rem;">
                            <strong style="color: ${dimBandInfo.color};">${dimBandInfo.name}: ${maturity.name}</strong> — ${maturity.description}
                        </div>
                        <div class="recommendations">
                            <h5>Recommended Next Steps:</h5>
                            ${recommendations.map(rec => `
                                <div class="recommendation-item">${rec}</div>
                            `).join('')}
                        </div>
                    </div>
                `;
            });

            html += `</div>`;

            html += `
                <div class="cta-section animate-in" style="background: linear-gradient(135deg, ${bandInfo.color}10, ${bandInfo.color}20);">
                    <h3>Don't Let These Insights Go to Waste</h3>
                    <p style="max-width: 600px; margin: 0 auto 1.5rem;">
                        Bring your assessment to the <strong>AI Architecture Lab</strong> to move to the next level, implement AI effectively, and ensure you realize the true value of AI for your organization.
                    </p>
                    <div class="btn-group">
                        <button class="btn-primary" onclick="downloadPDF()" id="download-btn">
                            Download PDF Report
                        </button>
                        <button class="btn-secondary" onclick="restartAssessment()">
                            Retake Assessment
                        </button>
                    </div>
                    <p style="margin-top: 1.5rem; font-size: 0.875rem; color: var(--gray-500);">
                        Your personalized report is your roadmap to AI success.
                    </p>

                    <!-- Results Page Video -->
                    <div class="video-container results-video">
                        <div class="video-wrapper">
                            <iframe id="results-video-iframe" src="https://play.vidyard.com/${getResultsVideo()}.html?" allowfullscreen></iframe>
                        </div>
                        <p class="video-label">See how the AI Architecture Lab can help you reach the next level</p>
                    </div>
                </div>
            `;

            document.getElementById('results-screen').innerHTML = html;
            document.getElementById('progress-bar').style.width = '100%';
            document.getElementById('progress-text').textContent = 'Complete';
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function restartAssessment() {
            answers = {};
            currentDimension = 0;
            answerStreak = 0;
            achievements = [];
            document.getElementById('results-screen').style.display = 'none';
            document.getElementById('welcome-screen').style.display = 'block';
            document.getElementById('status-bar').classList.remove('visible');
            document.getElementById('main-container').classList.remove('with-status-bar');
            updateProgress();
            updateStatusBar();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        async function downloadPDF() {
            const btn = document.getElementById('download-btn');
            const originalText = btn.textContent;
            btn.textContent = 'Generating PDF...';
            btn.disabled = true;

            const scores = calculateScores();
            const overallMaturity = getMaturityLevel(scores.overall.average);
            const band = getScoreBand(scores.overall.average);
            const bandInfo = scoreBands[band];
            const risks = riskOfInaction[band];
            const summary = generateExecutiveSummary(scores);
            const { jsPDF } = window.jspdf;
            const pdf = new jsPDF('p', 'mm', 'a4');

            const pageWidth = pdf.internal.pageSize.getWidth();
            const pageHeight = pdf.internal.pageSize.getHeight();
            const margin = 20;
            const contentWidth = pageWidth - (margin * 2);
            let yPos = margin;

            // Brand colors
            const brandDark = [10, 6, 25];
            const brandBlue = [33, 111, 223];
            const brandPink = [252, 78, 153];
            const brandCyan = [53, 160, 196];
            const brandGreen = [87, 236, 153];
            const brandOrange = [252, 136, 82];
            const brandYellow = [252, 174, 38];

            // Convert hex to RGB for band colors
            const bandColors = {
                atRisk: brandPink,
                emerging: brandOrange,
                developing: brandYellow,
                advanced: brandCyan,
                leading: brandGreen
            };

            const dimensionColors = {
                strategic: brandBlue,
                chart: brandPink,
                align: brandCyan,
                launch: brandGreen,
                evolve: brandOrange
            };

            // Helper function to add new page if needed
            function checkNewPage(requiredSpace) {
                if (yPos + requiredSpace > pageHeight - margin) {
                    pdf.addPage();
                    yPos = margin;
                    return true;
                }
                return false;
            }

            // Helper to strip HTML tags
            function stripHtml(html) {
                return html.replace(/<[^>]*>/g, '');
            }

            // === HEADER SECTION ===
            pdf.setFillColor(...brandDark);
            pdf.rect(0, 0, pageWidth, 60, 'F');

            // Title
            pdf.setTextColor(255, 255, 255);
            pdf.setFontSize(24);
            pdf.setFont('helvetica', 'bold');
            pdf.text('SCALE AI Maturity Assessment', pageWidth / 2, 25, { align: 'center' });

            pdf.setFontSize(12);
            pdf.setFont('helvetica', 'normal');
            pdf.text('AI Business Network | GTM AI Transformation Framework', pageWidth / 2, 35, { align: 'center' });

            // Date
            pdf.setFontSize(10);
            const today = new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
            pdf.text(`Generated: ${today}`, pageWidth / 2, 50, { align: 'center' });

            yPos = 75;

            // === OVERALL SCORE SECTION ===
            pdf.setTextColor(...brandDark);
            pdf.setFontSize(18);
            pdf.setFont('helvetica', 'bold');
            pdf.text('Overall Assessment Results', margin, yPos);
            yPos += 15;

            // Score box with band color
            pdf.setFillColor(...bandColors[band]);
            pdf.roundedRect(margin, yPos, 50, 50, 5, 5, 'F');
            pdf.setTextColor(255, 255, 255);
            pdf.setFontSize(28);
            pdf.setFont('helvetica', 'bold');
            pdf.text(scores.overall.average.toFixed(1), margin + 25, yPos + 28, { align: 'center' });
            pdf.setFontSize(10);
            pdf.text('out of 5.0', margin + 25, yPos + 40, { align: 'center' });

            // Band and maturity level info
            pdf.setTextColor(...bandColors[band]);
            pdf.setFontSize(14);
            pdf.setFont('helvetica', 'bold');
            pdf.text(bandInfo.name, margin + 60, yPos + 12);
            pdf.setTextColor(...brandDark);
            pdf.setFontSize(16);
            pdf.text(overallMaturity.name, margin + 60, yPos + 24);
            pdf.setFontSize(10);
            pdf.setFont('helvetica', 'normal');
            pdf.setTextColor(100, 100, 100);
            const descLines = pdf.splitTextToSize(bandInfo.description, contentWidth - 70);
            pdf.text(descLines, margin + 60, yPos + 34);

            yPos += 60;

            // === EXECUTIVE SUMMARY ===
            pdf.setFillColor(...bandColors[band]);
            pdf.rect(margin, yPos, 4, 45, 'F');

            pdf.setTextColor(...brandDark);
            pdf.setFontSize(12);
            pdf.setFont('helvetica', 'bold');
            pdf.text('Your AI Maturity Analysis', margin + 10, yPos + 8);

            pdf.setFontSize(9);
            pdf.setFont('helvetica', 'normal');
            pdf.setTextColor(60, 60, 60);
            const summaryText1 = pdf.splitTextToSize(stripHtml(summary.paragraph1), contentWidth - 15);
            pdf.text(summaryText1, margin + 10, yPos + 16);

            const summaryText2 = pdf.splitTextToSize(stripHtml(summary.paragraph2), contentWidth - 15);
            pdf.text(summaryText2, margin + 10, yPos + 16 + (summaryText1.length * 4) + 6);

            yPos += 55 + (summaryText1.length * 2);

            // === RISK OF INACTION ===
            checkNewPage(50);
            pdf.setFillColor(255, 245, 245);
            pdf.roundedRect(margin, yPos, contentWidth, 45, 3, 3, 'F');
            pdf.setFillColor(...bandColors[band]);
            pdf.rect(margin, yPos, 4, 45, 'F');

            pdf.setTextColor(...bandColors[band]);
            pdf.setFontSize(11);
            pdf.setFont('helvetica', 'bold');
            pdf.text(risks.title, margin + 10, yPos + 10);

            pdf.setTextColor(80, 80, 80);
            pdf.setFontSize(9);
            pdf.setFont('helvetica', 'normal');
            risks.risks.slice(0, 3).forEach((risk, i) => {
                pdf.text(`• ${risk}`, margin + 10, yPos + 20 + (i * 8));
            });

            yPos += 55;

            // === SCALE DIMENSION BREAKDOWN ===
            checkNewPage(100);
            pdf.setTextColor(...brandDark);
            pdf.setFontSize(14);
            pdf.setFont('helvetica', 'bold');
            pdf.text('Dimension Breakdown', margin, yPos);
            yPos += 12;

            // Dimension scores bar chart
            assessmentData.dimensions.forEach((dimension, index) => {
                checkNewPage(20);
                const score = scores[dimension.id];
                const barWidth = (score.average / 5) * (contentWidth - 50);
                const color = dimensionColors[dimension.id];
                const dimBand = getScoreBand(score.average);

                // Label
                pdf.setFontSize(10);
                pdf.setFont('helvetica', 'bold');
                pdf.setTextColor(...brandDark);
                pdf.text(`${dimension.letter} - ${dimension.name}`, margin, yPos);

                // Score and band
                pdf.setTextColor(...color);
                pdf.text(`${score.average.toFixed(1)} (${scoreBands[dimBand].name})`, pageWidth - margin, yPos, { align: 'right' });

                yPos += 5;

                // Background bar
                pdf.setFillColor(230, 230, 230);
                pdf.roundedRect(margin, yPos, contentWidth - 30, 5, 2, 2, 'F');

                // Score bar
                pdf.setFillColor(...color);
                pdf.roundedRect(margin, yPos, barWidth, 5, 2, 2, 'F');

                yPos += 12;
            });

            yPos += 5;

            // === DETAILED RESULTS PER DIMENSION ===
            pdf.addPage();
            yPos = margin;

            pdf.setTextColor(...brandDark);
            pdf.setFontSize(16);
            pdf.setFont('helvetica', 'bold');
            pdf.text('Detailed Results & Recommendations', margin, yPos);
            yPos += 15;

            assessmentData.dimensions.forEach((dimension, index) => {
                checkNewPage(80);

                const score = scores[dimension.id];
                const maturity = getMaturityLevel(score.average);
                const recommendations = getRecommendations(dimension.id, score.average);
                const color = dimensionColors[dimension.id];

                // Dimension header with colored bar
                pdf.setFillColor(...color);
                pdf.rect(margin, yPos, 4, 25, 'F');

                pdf.setTextColor(...brandDark);
                pdf.setFontSize(14);
                pdf.setFont('helvetica', 'bold');
                pdf.text(`${dimension.letter} - ${dimension.name}`, margin + 10, yPos + 8);

                pdf.setFontSize(10);
                pdf.setFont('helvetica', 'normal');
                pdf.setTextColor(100, 100, 100);
                pdf.text(dimension.tagline, margin + 10, yPos + 16);

                // Score badge
                pdf.setFillColor(...color);
                pdf.roundedRect(pageWidth - margin - 25, yPos + 2, 25, 12, 3, 3, 'F');
                pdf.setTextColor(255, 255, 255);
                pdf.setFontSize(11);
                pdf.setFont('helvetica', 'bold');
                pdf.text(score.average.toFixed(1), pageWidth - margin - 12.5, yPos + 10, { align: 'center' });

                yPos += 30;

                // Maturity level
                pdf.setTextColor(...brandDark);
                pdf.setFontSize(10);
                pdf.setFont('helvetica', 'bold');
                pdf.text(`Maturity Level: ${maturity.name}`, margin, yPos);
                yPos += 8;

                // Recommendations
                pdf.setFont('helvetica', 'bold');
                pdf.text('Recommended Next Steps:', margin, yPos);
                yPos += 6;

                pdf.setFont('helvetica', 'normal');
                pdf.setTextColor(60, 60, 60);
                recommendations.forEach((rec, i) => {
                    checkNewPage(15);
                    const recLines = pdf.splitTextToSize(`${i + 1}. ${rec}`, contentWidth - 10);
                    pdf.text(recLines, margin + 5, yPos);
                    yPos += recLines.length * 5 + 3;
                });

                yPos += 10;
            });

            // === MATURITY LEVELS REFERENCE ===
            checkNewPage(80);
            yPos += 5;

            pdf.setTextColor(...brandDark);
            pdf.setFontSize(14);
            pdf.setFont('helvetica', 'bold');
            pdf.text('SCALE Maturity Levels Reference', margin, yPos);
            yPos += 10;

            const maturityLevelsList = [
                { label: 'Ad Hoc', desc: 'Reactive, unstructured, accidental AI exploration', color: brandPink },
                { label: 'Exploring', desc: 'Curious, experimenting with AI, but inconsistent', color: brandOrange },
                { label: 'Establishing', desc: 'Intentional approach, building AI foundations', color: brandYellow },
                { label: 'Executing', desc: 'Systematic AI implementation with measurable outcomes', color: brandCyan },
                { label: 'Scaling', desc: 'Enterprise-wide AI integration with continuous improvement', color: brandGreen }
            ];

            maturityLevelsList.forEach((level, idx) => {
                checkNewPage(15);
                pdf.setFillColor(...level.color);
                pdf.circle(margin + 5, yPos + 3, 4, 'F');
                pdf.setTextColor(...brandDark);
                pdf.setFontSize(10);
                pdf.setFont('helvetica', 'bold');
                pdf.text(level.label, margin + 15, yPos + 5);
                pdf.setFont('helvetica', 'normal');
                pdf.setTextColor(100, 100, 100);
                pdf.text(level.desc, margin + 15, yPos + 11);
                yPos += 18;
            });

            // === AI ARCHITECTURE LAB CTA ===
            checkNewPage(70);
            yPos += 10;

            // CTA Box
            pdf.setFillColor(...brandBlue);
            pdf.roundedRect(margin, yPos, contentWidth, 50, 5, 5, 'F');

            pdf.setTextColor(255, 255, 255);
            pdf.setFontSize(14);
            pdf.setFont('helvetica', 'bold');
            pdf.text('Take Your Results to the AI Architecture Lab', margin + 10, yPos + 15);

            pdf.setFontSize(10);
            pdf.setFont('helvetica', 'normal');
            const ctaText = pdf.splitTextToSize(
                'Bring this assessment to the AI Architecture Lab to move to the next level, implement AI effectively, and ensure you realize the true value of AI for your organization.',
                contentWidth - 20
            );
            pdf.text(ctaText, margin + 10, yPos + 25);

            pdf.setFontSize(11);
            pdf.setFont('helvetica', 'bold');
            pdf.text('Your personalized report is your roadmap to AI success.', margin + 10, yPos + 43);

            yPos += 60;

            // === FOOTER ON LAST PAGE ===
            yPos = pageHeight - 30;
            pdf.setDrawColor(200, 200, 200);
            pdf.line(margin, yPos, pageWidth - margin, yPos);
            yPos += 8;

            pdf.setTextColor(150, 150, 150);
            pdf.setFontSize(9);
            pdf.setFont('helvetica', 'normal');
            pdf.text('AI Business Network | AI Architecture Lab | SCALE AI Maturity Assessment', pageWidth / 2, yPos, { align: 'center' });
            pdf.text('www.aibusinessnetwork.com', pageWidth / 2, yPos + 5, { align: 'center' });

            // Save PDF
            pdf.save('SCALE-AI-Maturity-Assessment-Results.pdf');

            btn.textContent = originalText;
            btn.disabled = false;
        }

        // Initialize on load
        init();
    </script>
</body>
</html>
